---
// Shared homepage component for all languages
import Layout from '../layouts/Layout.astro';
import LanguageSwitcher from './LanguageSwitcher.astro';
import type { Translation } from '../i18n/translations';

interface Props {
  t: Translation;
}

const { t } = Astro.props;
---

<Layout t={t}>
  <LanguageSwitcher t={t} />

  <main>
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-bg-gradient"></div>
      <div class="hero-content">
        <div class="logo-wrapper">
          <img src="/hakadoriya.png" alt="Hakadoriya Co. Logo" class="org-logo" />
          <div class="logo-ring"></div>
        </div>
        <h1 class="hero-title">
          <span class="title-main">{t.title}</span>
        </h1>
        <p class="tagline">{t.hero.tagline}</p>
        <div class="org-links">
          <a
            href="https://github.com/hakadoriya"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="GitHub Organization"
            class="social-link"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              ></path>
            </svg>
          </a>
        </div>
      </div>
      <div class="scroll-indicator">
        <span class="scroll-text">Scroll</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 5v14M5 12l7 7 7-7"/>
        </svg>
      </div>
    </section>

    <!-- What We Do Section -->
    <section class="what-we-do fade-in-section">
      <div class="section-inner">
        <div class="section-header">
          <span class="section-number">01</span>
          <h2>{t.whatWeDo.title}</h2>
        </div>
        <p class="what-we-do-description">{t.whatWeDo.description}</p>
        <div class="what-we-do-items">
          {
            t.whatWeDo.items.map((item, index) => (
              <div class="what-we-do-item" style={`--delay: ${index * 0.1}s`}>
                <div class="item-indicator"></div>
                <div class="item-content">
                  <h3>{item.title}</h3>
                  <p>{item.description}</p>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section class="projects fade-in-section">
      <div class="section-inner">
        <div class="section-header">
          <span class="section-number">02</span>
          <h2>{t.projects.title}</h2>
        </div>
        <div class="projects-grid">
          {
            t.projects.items.map((project, index) => (
              <a
                href={project.url}
                target="_blank"
                rel="noopener noreferrer"
                class="project-card"
                style={`--delay: ${index * 0.05}s`}
              >
                <div class="project-image-wrapper">
                  <div class="project-image-placeholder" />
                  <img
                    src={project.ogImage}
                    alt={project.name}
                    loading="lazy"
                    onload="this.parentElement.classList.add('loaded')"
                  />
                </div>
                <div class="project-name">{project.name}</div>
              </a>
            ))
          }
        </div>
        <div class="projects-more">
          <a
            href={t.projects.moreLink.url}
            target="_blank"
            rel="noopener noreferrer"
            class="more-link"
          >
            <span>{t.projects.moreLink.text}</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>
      </div>
    </section>

    <!-- Member Section -->
    <section class="member fade-in-section">
      <div class="section-inner">
        <div class="section-header">
          <span class="section-number">03</span>
          <h2>{t.member.title}</h2>
        </div>
        <div class="member-card">
          <div class="member-avatar-wrapper">
            <img
              src="/ginokent.png"
              alt={t.member.name}
              class="member-avatar"
            />
            <div class="avatar-ring"></div>
          </div>
          <div class="member-info">
            <h3>{t.member.name}</h3>
            <div class="member-links">
              <a
                href="https://github.com/ginokent"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="GitHub"
                class="member-social"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                  ></path>
                </svg>
              </a>
              <a
                href="https://x.com/ginokentdev"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="X (Twitter)"
                class="member-social"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
                  ></path>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Services Section -->
    <section class="services fade-in-section">
      <div class="section-inner">
        <div class="section-header">
          <span class="section-number">04</span>
          <h2>{t.services.title}</h2>
        </div>
        <ul class="service-list">
          {t.services.items.map((item, index) => (
            <li style={`--delay: ${index * 0.1}s`}>{item}</li>
          ))}
        </ul>
      </div>
    </section>

    <!-- Tech Stack Section -->
    <section class="tech-stack fade-in-section">
      <div class="section-inner">
        <div class="section-header">
          <span class="section-number">05</span>
          <h2>{t.techStack.title}</h2>
        </div>
        <div class="tech-categories">
          {
            t.techStack.items.map((category, catIndex) => (
              <div class="tech-category" style={`--delay: ${catIndex * 0.1}s`}>
                <h3 class="tech-category-name">{category.name}</h3>
                <ul class="tech-children">
                  {category.children.length <= 5 ? (
                    category.children.map((child) => <li>{child}</li>)
                  ) : (
                    <>
                      {category.children.slice(0, 4).map((child) => (
                        <li>{child}</li>
                      ))}
                      <li class="tech-expand-btn">+{category.children.length - 4}</li>
                      {category.children.slice(4).map((child) => (
                        <li class="tech-hidden">{child}</li>
                      ))}
                    </>
                  )}
                </ul>
              </div>
            ))
          }
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-line"></div>
    <p>&copy; {new Date().getFullYear()} {t.title}</p>
  </footer>
</Layout>

<style>
  /* Section inner container */
  .section-inner {
    max-width: 900px;
    margin: 0 auto;
  }

  /* Section header with number */
  .section-header {
    display: flex;
    align-items: baseline;
    gap: 1.5rem;
    margin-bottom: 4rem;
  }

  .section-number {
    font-family: var(--font-display);
    font-size: 0.875rem;
    font-weight: 300;
    color: var(--color-accent);
    letter-spacing: 0.1em;
  }

  section h2 {
    font-family: var(--font-sans);
    font-size: 0.75rem;
    font-weight: 500;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--color-text-muted);
  }

  /* Hero Section */
  .hero {
    position: relative;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-bg);
    padding: 2rem;
    overflow: hidden;
  }

  .hero-bg-gradient {
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse 80% 50% at 50% 0%, rgba(148, 163, 184, 0.05) 0%, transparent 60%);
    pointer-events: none;
  }

  .hero-content {
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .logo-wrapper {
    position: relative;
    width: 140px;
    height: 140px;
    margin: 0 auto 3rem;
  }

  .org-logo {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    position: relative;
    z-index: 1;
    animation: fadeInUp 1s var(--transition-smooth) both;
  }

  .logo-ring {
    position: absolute;
    inset: -8px;
    border-radius: 50%;
    border: 1px solid var(--color-border);
    animation: fadeInUp 1s var(--transition-smooth) both;
  }

  .hero-title {
    animation: fadeInUp 1s var(--transition-smooth) 0.3s both;
  }

  .title-main {
    font-family: var(--font-display);
    font-size: 3.5rem;
    font-weight: 300;
    letter-spacing: 0.08em;
    color: var(--color-text);
  }

  .tagline {
    font-family: var(--font-sans);
    color: var(--color-text-muted);
    font-size: 0.875rem;
    font-weight: 300;
    letter-spacing: 0.15em;
    margin-top: 1.5rem;
    margin-bottom: 3rem;
    text-transform: uppercase;
    animation: fadeInUp 1s var(--transition-smooth) 0.5s both;
  }

  .org-links {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    animation: fadeInUp 1s var(--transition-smooth) 0.7s both;
  }

  .social-link {
    color: var(--color-text-dim);
    padding: 0.75rem;
    border-radius: 50%;
    border: 1px solid var(--color-border-subtle);
    transition: all 0.3s var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .social-link:hover {
    color: var(--color-accent);
    border-color: var(--color-accent);
    transform: translateY(-2px);
  }

  /* Scroll indicator */
  .scroll-indicator {
    position: absolute;
    bottom: 3rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-text-muted);
    animation: fadeIn 1s var(--transition-smooth) 2s both;
  }

  .scroll-text {
    font-family: var(--font-sans);
    font-size: 0.625rem;
    font-weight: 500;
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }

  .scroll-indicator svg {
    animation: scrollBounce 2s ease-in-out infinite;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scrollBounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(4px);
    }
  }

  .scroll-indicator.hidden {
    opacity: 0;
    transition: opacity 0.3s;
  }

  /* Fade-in animation for sections */
  .fade-in-section {
    opacity: 0;
    transform: translateY(40px);
    transition:
      opacity 0.8s var(--transition-smooth),
      transform 0.8s var(--transition-smooth);
  }

  .fade-in-section.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* What We Do Section */
  .what-we-do {
    background-color: var(--color-bg-alt);
  }

  .what-we-do-description {
    font-size: 1.25rem;
    text-align: center;
    color: var(--color-text);
    line-height: 2;
    margin-bottom: 4rem;
    font-weight: 300;
  }

  .what-we-do-items {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .what-we-do-item {
    display: flex;
    gap: 1.5rem;
    padding: 2rem;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border-subtle);
    border-radius: 0.5rem;
    transition: all 0.3s var(--transition-smooth);
  }

  .what-we-do-item:hover {
    border-color: var(--color-border);
    transform: translateX(8px);
  }

  .item-indicator {
    width: 3px;
    background: linear-gradient(to bottom, var(--color-accent), transparent);
    border-radius: 2px;
    flex-shrink: 0;
  }

  .item-content h3 {
    font-family: var(--font-sans);
    font-size: 1rem;
    font-weight: 500;
    color: var(--color-text);
    margin-bottom: 0.75rem;
  }

  .item-content p {
    font-size: 0.9rem;
    color: var(--color-text-muted);
    line-height: 1.7;
  }

  /* Projects Section */
  .projects {
    background-color: var(--color-bg);
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }

  .project-card {
    display: block;
    overflow: hidden;
    border-radius: 0.5rem;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border-subtle);
    transition: all 0.4s var(--transition-smooth);
    position: relative;
  }

  .project-card:hover {
    transform: translateY(-4px);
    border-color: var(--color-border);
    box-shadow: var(--shadow-subtle);
  }

  .project-image-wrapper {
    position: relative;
    aspect-ratio: 1200 / 630;
    overflow: hidden;
  }

  .project-image-placeholder {
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, var(--color-bg-card) 25%, var(--color-bg-hover) 50%, var(--color-bg-card) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  .project-image-wrapper img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 0.5s var(--transition-smooth);
  }

  .project-image-wrapper.loaded img {
    opacity: 1;
  }

  .project-image-wrapper.loaded .project-image-placeholder {
    display: none;
  }

  .project-name {
    padding: 1rem 1.25rem;
    font-family: var(--font-sans);
    font-size: 0.85rem;
    font-weight: 400;
    color: var(--color-text-muted);
    letter-spacing: 0.02em;
  }

  .projects-more {
    text-align: center;
    margin-top: 3rem;
  }

  .more-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-text-muted);
    font-size: 0.875rem;
    font-weight: 400;
    letter-spacing: 0.05em;
    padding: 0.75rem 1.5rem;
    border: 1px solid var(--color-border-subtle);
    border-radius: 2rem;
    transition: all 0.3s var(--transition-smooth);
  }

  .more-link:hover {
    color: var(--color-accent);
    border-color: var(--color-accent);
  }

  .more-link svg {
    transition: transform 0.3s var(--transition-smooth);
  }

  .more-link:hover svg {
    transform: translateX(4px);
  }

  /* Member Section */
  .member {
    background-color: var(--color-bg-alt);
  }

  .member-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    text-align: center;
  }

  .member-avatar-wrapper {
    position: relative;
    width: 120px;
    height: 120px;
  }

  .member-avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    position: relative;
    z-index: 1;
  }

  .avatar-ring {
    position: absolute;
    inset: -6px;
    border-radius: 50%;
    border: 1px solid var(--color-border);
  }

  .member-info h3 {
    font-family: var(--font-display);
    font-size: 1.75rem;
    font-weight: 400;
    margin-bottom: 1.25rem;
    letter-spacing: 0.05em;
  }

  .member-links {
    display: flex;
    justify-content: center;
    gap: 1rem;
  }

  .member-social {
    color: var(--color-text-dim);
    padding: 0.625rem;
    border-radius: 50%;
    border: 1px solid var(--color-border-subtle);
    transition: all 0.3s var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .member-social:hover {
    color: var(--color-accent);
    border-color: var(--color-accent);
    transform: translateY(-2px);
  }

  /* Services Section */
  .services {
    background-color: var(--color-bg);
  }

  .service-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
    list-style: none;
  }

  .service-list li {
    padding: 1rem 2rem;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border-subtle);
    border-radius: 2rem;
    font-family: var(--font-sans);
    font-size: 0.9rem;
    font-weight: 400;
    color: var(--color-text);
    letter-spacing: 0.02em;
    transition: all 0.3s var(--transition-smooth);
  }

  .service-list li:hover {
    border-color: var(--color-accent);
    transform: translateY(-2px);
  }

  /* Tech Stack Section */
  .tech-stack {
    background-color: var(--color-bg-alt);
  }

  .tech-categories {
    display: flex;
    flex-direction: column;
    gap: 2.5rem;
  }

  .tech-category {
    text-align: center;
  }

  .tech-category-name {
    font-family: var(--font-sans);
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-accent);
    margin-bottom: 1.25rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  .tech-children {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
    list-style: none;
  }

  .tech-children li {
    padding: 0.5rem 1rem;
    background: var(--color-bg-card);
    border: 1px solid var(--color-border-subtle);
    border-radius: 0.25rem;
    font-size: 0.8rem;
    color: var(--color-text-muted);
    transition: all 0.3s var(--transition-smooth);
  }

  .tech-children li:hover {
    border-color: var(--color-border);
    color: var(--color-text);
  }

  .tech-children li.tech-hidden {
    display: none;
  }

  .tech-children li.tech-expand-btn {
    cursor: pointer;
    background: var(--color-accent);
    color: var(--color-bg);
    border-color: var(--color-accent);
    font-weight: 500;
  }

  .tech-children li.tech-expand-btn:hover {
    background: var(--color-text);
    border-color: var(--color-text);
  }

  .tech-children.expanded li.tech-hidden {
    display: block;
  }

  .tech-children.expanded li.tech-expand-btn {
    display: none;
  }

  /* Footer */
  footer {
    padding: 4rem 2rem;
    text-align: center;
    color: var(--color-text-dim);
    font-size: 0.8rem;
    background-color: var(--color-bg);
    letter-spacing: 0.1em;
  }

  .footer-line {
    width: 40px;
    height: 1px;
    background: var(--color-border);
    margin: 0 auto 2rem;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .title-main {
      font-size: 2.5rem;
    }

    .tagline {
      font-size: 0.75rem;
    }

    .logo-wrapper {
      width: 120px;
      height: 120px;
    }

    .projects-grid {
      grid-template-columns: 1fr;
    }

    .member-avatar-wrapper {
      width: 100px;
      height: 100px;
    }

    .section-header {
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 3rem;
    }

    section h2 {
      font-size: 0.7rem;
    }

    .service-list li {
      padding: 0.75rem 1.5rem;
      font-size: 0.85rem;
    }

    .tech-category-name {
      font-size: 0.7rem;
    }

    .tech-children li {
      padding: 0.4rem 0.8rem;
      font-size: 0.75rem;
    }

    .what-we-do-item {
      padding: 1.5rem;
    }
  }
</style>

<script>
  // Hide scroll indicator on scroll
  const scrollIndicator = document.querySelector('.scroll-indicator');
  if (scrollIndicator) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        scrollIndicator.classList.add('hidden');
      } else {
        scrollIndicator.classList.remove('hidden');
      }
    });
  }

  // Tech Stack expand button
  document.querySelectorAll('.tech-expand-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      const techChildren = btn.parentElement;
      if (techChildren) {
        techChildren.classList.add('expanded');
      }
    });
  });

  // Fade-in animation on scroll
  const fadeInSections = document.querySelectorAll('.fade-in-section');
  const fadeInObserver = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          fadeInObserver.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.15,
      rootMargin: '0px 0px -50px 0px'
    }
  );

  fadeInSections.forEach((section) => {
    fadeInObserver.observe(section);
  });
</script>
